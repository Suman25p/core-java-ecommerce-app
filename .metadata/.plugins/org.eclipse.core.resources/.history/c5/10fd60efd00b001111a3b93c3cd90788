package com.ecommerce.service;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;


import com.ecommerce.model.Product;

public class ProductManagement {
	private List<Product > productList = new ArrayList<>();
	
	//Loading sample products
	public void loadProducts() {
		productList.addAll(Arrays.asList(
				new Product(1, "Laptop", 55000, 5),
				new Product(2, "Mobile", 20000, 10),
				new Product(3, "HeadPhones", 2000, 15),
				new Product(4, "Keyboard", 1500, 20),
				new Product(5, "Mouse", 800, 25),
				new Product(6, "Monitor", 12000, 8),
				new Product(7, "Printer", 9000, 2),
				new Product(8, "Tablet", 18000, 5),
				new Product(9, "SmartWatch", 7000, 5),
				new Product(10, "Speaker", 3000, 1)
				
				));
	}
	
	//display all
	public void displayProducts()
	{	
		Iterator<Product> iterator = productList.iterator();
				
		while(iterator.hasNext()) {
			System.out.println(iterator.next());
		}
	}
	
	//Search using Stream API
	public List<Product> searchByName(String keyword) {
		String lowerKeyword = keyword.toLowerCase();
		
		return productList.stream()
				.filter(p -> p.getName()
				.toLowerCase()
				.contains(lowerKeyword))
				.toList();
		
//		return productList.stream()
//				.filter(p -> p.getName().equalsIgnoreCase(keyword))
//				.toList();
	}
	
	public void sortByPriceAsc() {
		productList.sort(Comparator.comparing(Product:: getPrice));
	}
	
	public void sortByPriceDesc() {
		productList.sort(Comparator.comparing(Product:: getPrice).reversed());
	}
	
	//Get product by Id
	public Product getProductById(int id)
	{
		return productList.stream()
				.filter(p -> p.getId() == id)
				.findFirst()
				.orElse(null);
	}
	
}
